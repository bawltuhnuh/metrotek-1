# Описание

## Назначение

Сбор и отображение статистики по трафику на заданном сетевом интерфейсе.

## Состав

### stat_collector 

Утилита для сбора статистики. 
Входные параметры:

-i <интерфейс> - обязательная опция для определения сетевого интерфейса для мониторинга;

-D <ip-адрес получателя> - необязательная опция для фильтрации учитываемого трафика по ip-адресу получателя;

-d <порт получателя> - необязательная опция для фильтрации трафика по порту получателя;

-S <ip источника> - необязательная опция для фильтрации трафика по ip-адресу источника;

-s <порт источника> - необязательная опция для фильтрации трафика по порту источника.

Утилита представлена в двух вариантах, каждый из которых реализован на двух потоках:

#### stat_collector_v1

Первый поток осуществляет чтение и фильтрацию трафика, второй - суммирование и выдачу данных в stat_displayer по запросу через POSIX Message Queue. 

#### stat_collector_v2

Первый поток читает, фильтрует и суммирует трафик, второй - обеспечивает выдачу данных в stat_displayer по запросу через POSIX Message Queue.

### stat_displayer

При запуске запрашивает статистику у stat_collector и выводит на экран.

# Сборка

## Зависимости

Должен быть предустановлен пакет libc6.

## Сборка и установка
    
    git clone https://github.com/bawltuhnuh/metrotek-1.git 
    cd metrotek-1
    make
    sudo make install

# Запуск

## stat_collector_v1

    sudo stat_collector_v1 -i <интерфейс> [-D <ip-адрес получателя>] [-d <порт получателя>] [-S <ip-адрес источника>] [-s <порт источника>] 

## stat_collector_v2
    
    sudo stat_collector_v2 -i <интерфейс> [-D <ip-адрес получателя>] [-d <порт получателя>] [-S <ip-адрес источника>] [-s <порт источника>] 

## stat_displayer
    
    sudo stat_displayer

# Результаты профилирования

Измерение пропускной способности проводилось с помощью программы-генератора UDP трафика, направляемого на отслеживаемый интерфейс.

В результате, в среднем stat_collector_v1 обрабатывал пакетов объемом в секунду.

stat_collector_v2 - пакетов объемом.

При этом наблюдался высокий процент загрузки CPU в обоих вариантах программы, что вызвано неблокирующим режимом работы сокетов. Соответственно архитектурные решения обоих вариантов программы требуют доработки.

# Авторство и лицензия

Автор: Ярославцева Александра

email: yaroslavceva_sasha@mail.ru  

Лицензия: GNU GPL
